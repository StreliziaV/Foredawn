<!DOCTYPE html>
<html lang="en">
    <head>
        <title></title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="css/style.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="css/index.css"/>
        <style>
            html, body {
                width: 100%;
                height: 100%;
                padding: 0;
                margin: 0;
            }
            .starter {
                display: flex;
                background-color: aqua;
                align-items: flex-end;
                justify-content: space-evenly;
                height: 100%;
            }
            .starter>div {
                padding: 100px;
            }
            .starter a {
                color: rgb(105, 117, 182);
                text-decoration: none;
            }
            .starter a:hover {
                color: rgb(38, 38, 38);
            }
            .chatBox {
                display: none;
            }
        </style>
    </head>
    <body>
        <div id="starter" class="starter">
            <div><a href="#">Start Game</a></div>
            <div><a href="#">Load Game</a></div>
            <div><a href="#">Achievemnt Game</a></div>
            <div><a href="#">Quit Game</a></div>
        </div>

        <div id="chatBox" class="chatBox">
            <img id="profile"></img>
            <div id="name"></div>
            <div id="textBox">
                <div id="text"></div>
            </div>
            <button id="choice1"></button>
            <button id="choice2"></button>
            <button id="choice3"></button>
        </div>

        <div id="wrapBg">  <!--游戏背景-->
			<div id="headTitle"> <!--开始标题-->
				<img id="headBird" src="img/bird0.png" alt="小鸟" /> <!--标题中的小鸟-->
			</div>
            <div id="c_monster"> 
				<img id="my_monster" src="img/c_monster1.png"> 
			</div>
			<button id="startBtn" ></button> <!--开始按钮-->
			<div id="grassLand1"></div> <!--草地1-->
			<div id="grassLand2"></div> <!--草地2-->
			<div id="score">
				<div id="num1"></div>
				<div id="num2"></div>
				<div id="num3"></div>
			</div>
			<div id="gameOver">
				<img src="img/game_over.jpg" alt="game over" />
				<img src="img/message.jpg" alt="message" />
				<img id="ok" src="img/ok.jpg" alt="ok" />
			</div>
            <div id="fly_win">
                <img src="img/you_win.png" alt="you_win" />
				<img id="fly_continue" src="img/continue.png" alt="continue" />
            </div>
		</div>

        <script>
            var starter = document.getElementById('starter');
            var chatBox = document.getElementById('chatBox');
            starter.children[0].addEventListener('click', function() {
                starter.style.display = 'none';
                chatBox.style.display = 'block';
            })
        </script>

        <script>
            // Global variables
            var scenes = [
                {
                    name: 'Rabbit',
                    text: 'Gosh, look what we\'ve got here, a fish!',
                    choices: undefined
                },
                {
                    name: 'Rabbit',
                    text: 'Ha ha, I\'m just kidding, welcome!',
                    choices: ['Thank you', 'Are you a rabbit?']
                },
                {
                    name: 'Rabbit',
                    text: 'What a courteous kid! Hey, Clipper, come here to see our new friend.',
                    choices: undefined
                },
                {
                    name: 'Rabbit',
                    text: 'Of course not! I\'m a magic rabbit... Hey, Clipper, come here!',
                    choices: undefined
                },
                {
                    name: 'Clipper',
                    text: 'What\'s going on?',
                    choices: undefined
                },
                {
                    name: 'Rabbit',
                    text: 'Take a look. There is a human kid. Where are you from?',
                    choices: ['U.S.', 'China', 'Mars']
                },
                {
                    name: 'Clipper',
                    text: 'Then your Chinese must be poor.',
                    choices: undefined
                },
                {
                    name: 'Clipper',
                    text: 'Then your English must be poor.',
                    choices: undefined
                },
                {
                    name: 'Clipper',
                    text: 'Awesome!',
                    choices: undefined
                },
                {
                    name: 'Rabbit',
                    text: 'Let us play a game. Here are the rules bala bala...',
                    choices: ['fly bird']
                },
                {
                    name: 'Game',
                    text: 'fly bird',
                    choices: undefined
                },
                {
                    name: 'Rabbit',
                    text: 'It\'s so exhilarating to see you make it!',
                    choices: undefined
                },
            ];
            // Global variables
            var dic = {
                'Rabbit': 'img/兔子.jpg',
                'Clipper': 'img/黑白.png'
            }
            // Global variables
            var graph = [
                1,
                [2, 3],
                4,
                4,
                5,
                [6, 7, 8],
                9,
                9,
                9,
                10,
                11
            ]
            function display(n) {
                if (scenes[n].name == 'Game') {
                    if (scenes[n].text == 'fly bird') {
                        currentScene = graph[currentScene];
                        fly_bird();
                    }
                } else {
                    var name = document.getElementById('name');
                    var text = document.getElementById('text');
                    var choice1 = document.getElementById('choice1');
                    var choice2 = document.getElementById('choice2');
                    var choice3 = document.getElementById('choice3');
                    if (name.innerHTML != scenes[n].name) {
                        name.innerHTML = scenes[n].name;
                        var profile = document.getElementById('profile');
                        profile.style.background = 'url(' + dic[name.innerHTML] + ')';
                        profile.style.backgroundSize = '100%';
                    }
                    text.innerHTML = scenes[n].text;
                    if (scenes[n].choices == undefined) {
                        choice1.style.display = 'none';
                        choice2.style.display = 'none';
                        choice3.style.display = 'none';
                    } else {
                        switch (scenes[n].choices.length) {
                            case 1:
                                choice1.innerHTML = scenes[n].choices[0];
                                choice1.style.display = 'block';
                                break;
                            case 2:
                                choice1.innerHTML = scenes[n].choices[0];
                                choice2.innerHTML = scenes[n].choices[1];
                                choice1.style.display = 'block';
                                choice2.style.display = 'block';
                                break;
                            case 3:
                                choice1.innerHTML = scenes[n].choices[0];
                                choice2.innerHTML = scenes[n].choices[1];
                                choice3.innerHTML = scenes[n].choices[2];
                                choice1.style.display = 'block';
                                choice2.style.display = 'block';
                                choice3.style.display = 'block';
                                break;
                        }
                    }
                }
                
            }
            function clearScreen() {
                chatBox.style.display = 'none';
            }
            function fly_bird() {
                clearScreen();
                var wrapBg = document.getElementById('wrapBg');
                wrapBg.style.display = 'block';
            }
            var currentScene = 0;
            display(0);
            var textBox = document.getElementById('textBox');
            var button1 = document.getElementById('choice1');
            var button2 = document.getElementById('choice2');
            var button3 = document.getElementById('choice3');
            textBox.onclick = function() {
                if (typeof graph[currentScene] == "number") {
                    currentScene = graph[currentScene];
                    display(currentScene);
                }
            }
            button1.onclick = function() {
                if (typeof graph[currentScene] == "object") {
                    currentScene = graph[currentScene][0];
                    display(currentScene);
                }
            }
            button2.onclick = function() {
                if (typeof graph[currentScene] == "object") {
                    currentScene = graph[currentScene][1];
                    display(currentScene);
                }
            }
            button3.onclick = function() {
                if (typeof graph[currentScene] == "object") {
                    currentScene = graph[currentScene][2];
                    display(currentScene);
                }
            }

        </script>

    </body>
    <script src="js/block.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/baseObj.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/bird.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/copter.js" type="text/javascript" charset="utf-8"></script>
</html>